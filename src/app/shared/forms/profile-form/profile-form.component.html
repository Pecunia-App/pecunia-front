<form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
  <div class="form-header">
    <h2>Profil</h2>
    <app-ui-button
      *ngIf="!isEditMode"
      type="button"
      (click)="toggleEditMode()"
      variant="primary"
    >
      Modifier
    </app-ui-button>
  </div>

  <div class="form-group">
    <app-ui-input
      label="Prénom"
      formControlName="firstname"
      [placeholder]="'Votre prénom'"
      [readonly]="!isEditMode"
      type="text"
    >
      <app-ui-icon name="user" icon-left></app-ui-icon>
    </app-ui-input>

    <app-ui-input
      label="Nom"
      formControlName="lastname"
      [placeholder]="'Votre nom'"
      [readonly]="!isEditMode"
      type="text"
    >
      <app-ui-icon name="user" icon-left></app-ui-icon>
    </app-ui-input>

    <app-ui-input
      label="Email"
      formControlName="email"
      [placeholder]="'Votre email'"
      type="email"
      [readonly]="!isEditMode"
    >
      <app-ui-icon name="mail" icon-left></app-ui-icon>
    </app-ui-input>
  </div>

  <div class="password-fields" *ngIf="isEditMode">
    <app-ui-input
      label="Mot de passe"
      formControlName="password"
      [type]="showPassword ? 'text' : 'password'"
      [placeholder]="'Votre nouveau mot de passe'"
    >
      <app-ui-icon name="lock" icon-left></app-ui-icon>
    </app-ui-input>

    <app-ui-input
      label="Confirmer le mot de passe"
      formControlName="confirmPassword"
      [type]="showPassword ? 'text' : 'password'"
      [placeholder]="'Confirmez votre mot de passe'"
    >
      <app-ui-icon name="lock" icon-left></app-ui-icon>
    </app-ui-input>

    <div class="show-password">
      <input
        type="checkbox"
        id="showPassword"
        (change)="togglePasswordVisibility()"
      />
      <label for="showPassword">Afficher le mot de passe</label>
    </div>
  </div>

  <div class="form-actions" *ngIf="isEditMode">
    <app-ui-button
      type="submit"
      [disabled]="!profileForm.valid || profileForm.pristine"
      variant="primary"
    >
      Valider
    </app-ui-button>
    <app-ui-button type="button" (click)="toggleEditMode()" variant="secondary">
      Annuler
    </app-ui-button>
  </div>
</form>
